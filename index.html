<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¯ããã¿ã‚¯ã‚¤ãƒƒã‚¯è¨ºæ–­ - 3åˆ†ã§åˆ†ã‹ã‚‹å…±ç”Ÿæ´»åŠ›ãƒã‚§ãƒƒã‚¯</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .slider-container {
            position: relative;
            margin: 20px 0;
        }
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .progress-bar {
            height: 6px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex items-center justify-center mb-4">
                <i class="fas fa-seedling text-4xl mr-3"></i>
                <h1 class="text-4xl font-bold">ã¯ããã¿ã‚¯ã‚¤ãƒƒã‚¯è¨ºæ–­</h1>
            </div>
            <p class="text-xl opacity-90">ãŸã£ãŸ3åˆ†ã§ã€ã‚ãªãŸã®å…±ç”Ÿæ´»åŠ›ã‚’è¦‹ãˆã‚‹åŒ–</p>
            <p class="text-sm mt-2 opacity-75">15å•ã®ç°¡å˜ãªè³ªå•ã«ç­”ãˆã¦ã€ä»Šã™ãçµæœã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Start Screen -->
        <div id="startScreen" class="text-center fade-in">
            <div class="bg-white rounded-2xl card-shadow p-8 max-w-2xl mx-auto">
                <div class="text-6xl mb-6">ğŸŒ±</div>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">å…±ç”Ÿæ´»åŠ›ã£ã¦ä½•ï¼Ÿ</h2>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    éšœãŒã„ã®ã‚ã‚‹æ–¹ã‚‚ã€ãªã„æ–¹ã‚‚ã€ã¿ã‚“ãªãŒåœ°åŸŸã‚„è·å ´ã§ä»–ã®äººã¨ä¸€ç·’ã«ç”Ÿãã¦ã„ãåŠ›ã®ã“ã¨ã§ã™ã€‚
                    ã€Œèº«ä½“ãƒ»å¥åº·ã€ã€Œå±…å ´æ‰€ãƒ»ç’°å¢ƒã€ã€Œé–¢ä¿‚ãƒ»ã¤ãªãŒã‚Šã€ã€Œå­¦ã³ãƒ»å®Ÿè·µã€ã€Œè‡ªå·±ãƒ»æ„å¿—ã€ã®5ã¤ã®åˆ†é‡ã§ã€
                    ã‚ãªãŸã®ç¾åœ¨ã®çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <i class="fas fa-clock text-blue-600 text-2xl mb-2"></i>
                        <h3 class="font-semibold text-blue-800">æ‰€è¦æ™‚é–“</h3>
                        <p class="text-blue-600">ç´„3åˆ†</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <i class="fas fa-chart-radar text-green-600 text-2xl mb-2"></i>
                        <h3 class="font-semibold text-green-800">çµæœ</h3>
                        <p class="text-green-600">å³åº§ã«è¡¨ç¤º</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <i class="fas fa-lightbulb text-purple-600 text-2xl mb-2"></i>
                        <h3 class="font-semibold text-purple-800">ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h3>
                        <p class="text-purple-600">å€‹åˆ¥ææ¡ˆ</p>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <i class="fas fa-hands-helping text-orange-600 text-2xl mb-2"></i>
                        <h3 class="font-semibold text-orange-800">æ”¯æ´</h3>
                        <p class="text-orange-600">å°‚é–€å®¶ã«ç›¸è«‡</p>
                    </div>
                </div>
                <button onclick="startAssessment()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-4 px-8 rounded-full text-lg hover:from-blue-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-300 pulse-animation">
                    <i class="fas fa-play mr-2"></i>è¨ºæ–­ã‚’å§‹ã‚ã‚‹
                </button>
            </div>
        </div>

        <!-- Assessment Screen -->
        <div id="assessmentScreen" class="hidden">
            <!-- Progress Bar -->
            <div class="bg-white rounded-2xl card-shadow p-6 mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-800">è³ªå• <span id="currentQuestion">1</span> / 15</h2>
                    <div class="text-sm text-gray-600">
                        <i class="fas fa-clock mr-1"></i>
                        æ®‹ã‚Šæ™‚é–“: <span id="timeRemaining">3:00</span>
                    </div>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progressBar" class="progress-bar w-0 h-2 rounded-full"></div>
                </div>
            </div>

            <!-- Question Card -->
            <div class="bg-white rounded-2xl card-shadow p-8 fade-in">
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <div id="questionIcon" class="text-3xl mr-3">ğŸ’ª</div>
                        <div>
                            <h3 id="questionCategory" class="text-lg font-semibold text-gray-800">èº«ä½“ãƒ»å¥åº·</h3>
                            <p id="questionSubCategory" class="text-sm text-gray-600">æ™‚é–“ã®ä½¿ã„æ–¹</p>
                        </div>
                    </div>
                    <h2 id="questionText" class="text-2xl font-bold text-gray-800 mb-6">
                        ä½“èª¿ã‚„å¥åº·ã®ãŸã‚ã«ã€æ™‚é–“ã‚’ä½¿ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ
                    </h2>
                </div>

                <div class="slider-container">
                    <input type="range" min="1" max="5" value="3" class="slider" id="answerSlider">
                    <div class="flex justify-between text-sm text-gray-600 mt-2">
                        <span>å…¨ãã§ãã¦ã„ãªã„</span>
                        <span>ã‚ã¾ã‚Šã§ãã¦ã„ãªã„</span>
                        <span>ã©ã¡ã‚‰ã¨ã‚‚è¨€ãˆãªã„</span>
                        <span>ã ã„ãŸã„ã§ãã¦ã„ã‚‹</span>
                        <span>ã—ã£ã‹ã‚Šã§ãã¦ã„ã‚‹</span>
                    </div>
                    <div class="text-center mt-4">
                        <span class="text-2xl font-bold text-blue-600" id="sliderValue">3</span>
                    </div>
                </div>

                <div class="text-center mt-8">
                    <button onclick="nextQuestion()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 px-8 rounded-full text-lg hover:from-blue-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-300">
                        <span id="nextButtonText">æ¬¡ã®è³ªå•</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden">
            <div class="bg-white rounded-2xl card-shadow p-8 mb-8">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-4">ğŸ‰</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">è¨ºæ–­å®Œäº†ï¼</h2>
                    <p class="text-gray-600">ã‚ãªãŸã®å…±ç”Ÿæ´»åŠ›ã®çµæœã‚’ãŠè¦‹ã›ã—ã¾ã™</p>
                </div>

                <!-- Radar Chart -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">
                        <i class="fas fa-chart-radar mr-2"></i>å…±ç”Ÿæ´»åŠ›ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
                    </h3>
                    <div class="max-w-lg mx-auto">
                        <canvas id="radarChart" style="height: 400px;"></canvas>
                    </div>
                </div>

                <!-- Scores -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                    <div class="bg-red-50 p-4 rounded-lg text-center">
                        <i class="fas fa-heart text-red-600 text-2xl mb-2"></i>
                        <h4 class="font-semibold text-red-800">èº«ä½“ãƒ»å¥åº·</h4>
                        <p class="text-2xl font-bold text-red-600" id="healthScore">-</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <i class="fas fa-home text-green-600 text-2xl mb-2"></i>
                        <h4 class="font-semibold text-green-800">å±…å ´æ‰€ãƒ»ç’°å¢ƒ</h4>
                        <p class="text-2xl font-bold text-green-600" id="environmentScore">-</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <i class="fas fa-users text-blue-600 text-2xl mb-2"></i>
                        <h4 class="font-semibold text-blue-800">é–¢ä¿‚ãƒ»ã¤ãªãŒã‚Š</h4>
                        <p class="text-2xl font-bold text-blue-600" id="relationshipScore">-</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg text-center">
                        <i class="fas fa-graduation-cap text-purple-600 text-2xl mb-2"></i>
                        <h4 class="font-semibold text-purple-800">å­¦ã³ãƒ»å®Ÿè·µ</h4>
                        <p class="text-2xl font-bold text-purple-600" id="learningScore">-</p>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg text-center">
                        <i class="fas fa-user text-yellow-600 text-2xl mb-2"></i>
                        <h4 class="font-semibold text-yellow-800">è‡ªå·±ãƒ»æ„å¿—</h4>
                        <p class="text-2xl font-bold text-yellow-600" id="selfScore">-</p>
                    </div>
                    <div class="bg-pink-50 p-4 rounded-lg text-center">
                        <i class="fas fa-smile text-pink-600 text-2xl mb-2"></i>
                        <h4 class="font-semibold text-pink-800">å¹¸ç¦æ„Ÿ</h4>
                        <p class="text-2xl font-bold text-pink-600" id="happinessScore">-</p>
                    </div>
                </div>

                <!-- Personalized Advice -->
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-lightbulb mr-2"></i>ã‚ãªãŸã¸ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹
                    </h3>
                    <div id="personalizedAdvice" class="space-y-4">
                        <!-- ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒå‹•çš„ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="text-center space-y-4">
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="downloadPDF()" class="bg-green-600 text-white font-bold py-3 px-6 rounded-full hover:bg-green-700 transition-all duration-300">
                            <i class="fas fa-download mr-2"></i>çµæœã‚’PDFä¿å­˜
                        </button>
                        <button onclick="shareResults()" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-full hover:bg-blue-700 transition-all duration-300">
                            <i class="fas fa-share-alt mr-2"></i>çµæœã‚’å…±æœ‰
                        </button>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <p class="text-orange-800 font-semibold mb-2">
                            <i class="fas fa-star mr-2"></i>ã‚‚ã£ã¨è©³ã—ãçŸ¥ã‚ŠãŸã„æ–¹ã¸
                        </p>
                        <p class="text-orange-700 text-sm mb-4">
                            ã‚ˆã‚Šè©³ç´°ãªåˆ†æã‚„å°‚é–€å®¶ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã”å¸Œæœ›ã®å ´åˆã¯ã€ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã‚’ãŠè©¦ã—ãã ã•ã„ã€‚
                        </p>
                        <div class="space-y-2">
                            <button onclick="upgradeToPremium()" class="bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold py-2 px-6 rounded-full hover:from-orange-600 hover:to-red-700 transition-all duration-300">
                                <i class="fas fa-crown mr-2"></i>ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã‚’è©¦ã™
                            </button>
                            <button onclick="connectToSupporter()" class="bg-gradient-to-r from-purple-500 to-pink-600 text-white font-bold py-2 px-6 rounded-full hover:from-purple-600 hover:to-pink-700 transition-all duration-300">
                                <i class="fas fa-hands-helping mr-2"></i>æ”¯æ´è€…ã«ç›¸è«‡ã™ã‚‹
                            </button>
                        </div>
                    </div>
                    <button onclick="restartAssessment()" class="text-gray-600 hover:text-gray-800 font-semibold">
                        <i class="fas fa-redo mr-2"></i>ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="container mx-auto px-4 text-center">
            <h3 class="text-xl font-bold mb-4">ã¯ããã¿ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </h3>
            <p class="text-gray-400 mb-4">å…±ç”Ÿç¤¾ä¼šã®å®Ÿç¾ã‚’ç›®æŒ‡ã—ã¦ã€ä¸€äººã²ã¨ã‚Šã®æˆé•·ã‚’æ”¯æ´ã—ã¾ã™</p>
            <div class="flex justify-center space-x-6">
                <a href="#" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fab fa-twitter text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fab fa-facebook text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fab fa-instagram text-xl"></i>
                </a>
            </div>
            <p class="text-sm text-gray-500 mt-4">Â© 2024 ã¯ããã¿ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ . All rights reserved.</p>
        </div>
    </footer>

    <script>
        // è¨ºæ–­ãƒ‡ãƒ¼ã‚¿
        const questions = [
            {
                category: "èº«ä½“ãƒ»å¥åº·",
                subCategory: "æ™‚é–“ã®ä½¿ã„æ–¹",
                icon: "ğŸ’ª",
                question: "ä½“èª¿ã‚„å¥åº·ã®ãŸã‚ã«ã€æ™‚é–“ã‚’ä½¿ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ",
                domain: "health"
            },
            {
                category: "èº«ä½“ãƒ»å¥åº·",
                subCategory: "äººã¨ã®ã¤ãªãŒã‚Š",
                icon: "ğŸ’ª",
                question: "å¥åº·ã«ã¤ã„ã¦å®‰å¿ƒã—ã¦è©±ã›ã‚‹äººã¯ã„ã¾ã™ã‹ï¼Ÿ",
                domain: "health"
            },
            {
                category: "èº«ä½“ãƒ»å¥åº·",
                subCategory: "çµŒæ¸ˆçš„ãªå®‰å®š",
                icon: "ğŸ’ª",
                question: "ç—…é™¢ã‚„è–¬ã®ã“ã¨ã§ã€ãŠé‡‘ã®å¿ƒé…ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                domain: "health",
                reverse: true
            },
            {
                category: "å±…å ´æ‰€ãƒ»ç’°å¢ƒ",
                subCategory: "æ™‚é–“ã®ä½¿ã„æ–¹",
                icon: "ğŸ ",
                question: "å®‰å¿ƒã—ã¦éã”ã›ã‚‹å ´æ‰€ã§ã€ååˆ†ãªæ™‚é–“ã‚’éã”ã›ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                domain: "environment"
            },
            {
                category: "å±…å ´æ‰€ãƒ»ç’°å¢ƒ",
                subCategory: "äººã¨ã®ã¤ãªãŒã‚Š",
                icon: "ğŸ ",
                question: "ã‚ãªãŸã®å±…å ´æ‰€ã«ã¯ã€ä¿¡é ¼ã§ãã‚‹äººãŒã„ã¾ã™ã‹ï¼Ÿ",
                domain: "environment"
            },
            {
                category: "å±…å ´æ‰€ãƒ»ç’°å¢ƒ",
                subCategory: "çµŒæ¸ˆçš„ãªå®‰å®š",
                icon: "ğŸ ",
                question: "ä½ã¾ã„ã‚„å±…å ´æ‰€ã§ã€ãŠé‡‘ã®å¿ƒé…ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                domain: "environment",
                reverse: true
            },
            {
                category: "é–¢ä¿‚ãƒ»ã¤ãªãŒã‚Š",
                subCategory: "æ™‚é–“ã®ä½¿ã„æ–¹",
                icon: "ğŸ‘¥",
                question: "äººã¨ä¸€ç·’ã«ã„ã‚‹æ™‚é–“ã¯ã€ã‚ãªãŸã«ã¨ã£ã¦ã¡ã‚‡ã†ã©ã„ã„ã§ã™ã‹ï¼Ÿ",
                domain: "relationship"
            },
            {
                category: "é–¢ä¿‚ãƒ»ã¤ãªãŒã‚Š",
                subCategory: "äººã¨ã®ã¤ãªãŒã‚Š",
                icon: "ğŸ‘¥",
                question: "ä¿¡é ¼ã§ãã‚‹äººãŒã„ã¾ã™ã‹ï¼Ÿ",
                domain: "relationship"
            },
            {
                category: "é–¢ä¿‚ãƒ»ã¤ãªãŒã‚Š",
                subCategory: "çµŒæ¸ˆçš„ãªå®‰å®š",
                icon: "ğŸ‘¥",
                question: "äººã¨ä¸€ç·’ã«éã”ã™ãŸã‚ã®ãŠé‡‘ã¯è¶³ã‚Šã¦ã„ã¾ã™ã‹ï¼Ÿ",
                domain: "relationship"
            },
            {
                category: "å­¦ã³ãƒ»å®Ÿè·µ",
                subCategory: "æ™‚é–“ã®ä½¿ã„æ–¹",
                icon: "ğŸ“š",
                question: "æ–°ã—ã„ã“ã¨ã‚’å­¦ã‚“ã ã‚ŠæŒ‘æˆ¦ã—ãŸã‚Šã™ã‚‹æ™‚é–“ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                domain: "learning"
            },
            {
                category: "å­¦ã³ãƒ»å®Ÿè·µ",
                subCategory: "äººã¨ã®ã¤ãªãŒã‚Š",
                icon: "ğŸ“š",
                question: "å­¦ã³ã‚„æŒ‘æˆ¦ã‚’å¿œæ´ã—ã¦ãã‚Œã‚‹äººã¯ã„ã¾ã™ã‹ï¼Ÿ",
                domain: "learning"
            },
            {
                category: "å­¦ã³ãƒ»å®Ÿè·µ",
                subCategory: "çµŒæ¸ˆçš„ãªå®‰å®š",
                icon: "ğŸ“š",
                question: "å­¦ã³ãŸã„ã“ã¨ã®ãŸã‚ã«ã€ãŠé‡‘ã®å¿ƒé…ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                domain: "learning",
                reverse: true
            },
            {
                category: "è‡ªå·±ãƒ»æ„å¿—",
                subCategory: "æ™‚é–“ã®ä½¿ã„æ–¹",
                icon: "ğŸŒŸ",
                question: "è‡ªåˆ†ã‚‰ã—ãéã”ã™ãŸã‚ã®æ™‚é–“ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                domain: "self"
            },
            {
                category: "è‡ªå·±ãƒ»æ„å¿—",
                subCategory: "äººã¨ã®ã¤ãªãŒã‚Š",
                icon: "ğŸŒŸ",
                question: "ã‚ãªãŸã®æ„è¦‹ã‚„è€ƒãˆã‚’å°Šé‡ã—ã¦ãã‚Œã‚‹äººã¯ã„ã¾ã™ã‹ï¼Ÿ",
                domain: "self"
            },
            {
                category: "å¹¸ç¦æ„Ÿ",
                subCategory: "å…¨ä½“çš„ãªæº€è¶³åº¦",
                icon: "ğŸ˜Š",
                question: "ä»Šã®ã‚ãªãŸã®ç”Ÿæ´»ã§ã€å¹¸ã›ã ã¨æ„Ÿã˜ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                domain: "happiness"
            }
        ];

        let currentQuestionIndex = 0;
        let answers = [];
        let startTime;
        let timerInterval;

        // è¨ºæ–­é–‹å§‹
        function startAssessment() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('assessmentScreen').classList.remove('hidden');
            startTime = Date.now();
            startTimer();
            showQuestion();
        }

        // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
        function startTimer() {
            const duration = 3 * 60 * 1000; // 3åˆ†
            timerInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = Math.max(0, duration - elapsed);
                const minutes = Math.floor(remaining / 60000);
                const seconds = Math.floor((remaining % 60000) / 1000);
                document.getElementById('timeRemaining').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (remaining <= 0) {
                    clearInterval(timerInterval);
                    completeAssessment();
                }
            }, 1000);
        }

        // è³ªå•è¡¨ç¤º
        function showQuestion() {
            const q = questions[currentQuestionIndex];
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('questionIcon').textContent = q.icon;
            document.getElementById('questionCategory').textContent = q.category;
            document.getElementById('questionSubCategory').textContent = q.subCategory;
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('progressBar').style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
            document.getElementById('answerSlider').value = 3;
            document.getElementById('sliderValue').textContent = 3;
            
            if (currentQuestionIndex === questions.length - 1) {
                document.getElementById('nextButtonText').textContent = 'çµæœã‚’è¦‹ã‚‹';
            }
        }

        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤æ›´æ–°
        document.getElementById('answerSlider').addEventListener('input', function(e) {
            document.getElementById('sliderValue').textContent = e.target.value;
        });

        // æ¬¡ã®è³ªå•
        function nextQuestion() {
            const answer = parseInt(document.getElementById('answerSlider').value);
            const q = questions[currentQuestionIndex];
            
            // é€†è»¢é …ç›®ã®å‡¦ç†
            const processedAnswer = q.reverse ? (6 - answer) : answer;
            
            answers.push({
                questionIndex: currentQuestionIndex,
                answer: processedAnswer,
                domain: q.domain,
                originalAnswer: answer
            });

            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                completeAssessment();
            }
        }

        // è¨ºæ–­å®Œäº†
        function completeAssessment() {
            clearInterval(timerInterval);
            document.getElementById('assessmentScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            calculateAndShowResults();
        }

        // çµæœè¨ˆç®—ã¨è¡¨ç¤º
        function calculateAndShowResults() {
            // å„é ˜åŸŸã®ã‚¹ã‚³ã‚¢è¨ˆç®—
            const scores = {
                health: 0,
                environment: 0,
                relationship: 0,
                learning: 0,
                self: 0,
                happiness: 0
            };

            const counts = {
                health: 0,
                environment: 0,
                relationship: 0,
                learning: 0,
                self: 0,
                happiness: 0
            };

            answers.forEach(answer => {
                scores[answer.domain] += answer.answer;
                counts[answer.domain]++;
            });

            // å¹³å‡ã‚¹ã‚³ã‚¢è¨ˆç®—
            const avgScores = {};
            Object.keys(scores).forEach(domain => {
                avgScores[domain] = counts[domain] > 0 ? (scores[domain] / counts[domain]).toFixed(1) : 0;
            });

            // ã‚¹ã‚³ã‚¢è¡¨ç¤º
            document.getElementById('healthScore').textContent = avgScores.health;
            document.getElementById('environmentScore').textContent = avgScores.environment;
            document.getElementById('relationshipScore').textContent = avgScores.relationship;
            document.getElementById('learningScore').textContent = avgScores.learning;
            document.getElementById('selfScore').textContent = avgScores.self;
            document.getElementById('happinessScore').textContent = avgScores.happiness;

            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆä½œæˆ
            createRadarChart(avgScores);

            // å€‹åˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”Ÿæˆ
            generateAdvice(avgScores);
        }

        // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆä½œæˆ
        function createRadarChart(scores) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['èº«ä½“ãƒ»å¥åº·', 'å±…å ´æ‰€ãƒ»ç’°å¢ƒ', 'é–¢ä¿‚ãƒ»ã¤ãªãŒã‚Š', 'å­¦ã³ãƒ»å®Ÿè·µ', 'è‡ªå·±ãƒ»æ„å¿—', 'å¹¸ç¦æ„Ÿ'],
                    datasets: [{
                        label: 'å…±ç”Ÿæ´»åŠ›',
                        data: [
                            scores.health,
                            scores.environment,
                            scores.relationship,
                            scores.learning,
                            scores.self,
                            scores.happiness
                        ],
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(102, 126, 234, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            ticks: {
                                stepSize: 1,
                                display: true,
                                backdropColor: 'transparent'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”Ÿæˆ
        function generateAdvice(scores) {
            const adviceContainer = document.getElementById('personalizedAdvice');
            
            // æœ€ã‚‚ä½ã„ã‚¹ã‚³ã‚¢ã¨é«˜ã„ã‚¹ã‚³ã‚¢ã‚’ç‰¹å®š
            const scoreEntries = Object.entries(scores).map(([domain, score]) => ({
                domain, 
                score: parseFloat(score),
                name: getDomainName(domain)
            }));
            
            const sortedScores = scoreEntries.sort((a, b) => b.score - a.score);
            const strongest = sortedScores[0];
            const weakest = sortedScores[sortedScores.length - 1];
            
            const advice = [];
            
            // å¼·ã¿ã®èªè­˜
            if (strongest.score >= 4.0) {
                advice.push({
                    type: 'strength',
                    title: `âœ¨ ç´ æ™´ã‚‰ã—ã„å¼·ã¿ï¼š${strongest.name}`,
                    content: `${strongest.name}ã®åˆ†é‡ã§ã¨ã¦ã‚‚è‰¯ã„çŠ¶æ…‹ã‚’ä¿ã£ã¦ã„ã¾ã™ã€‚ã“ã®å¼·ã¿ã‚’æ´»ã‹ã—ã¦ã€ä»–ã®åˆ†é‡ã§ã®æˆé•·ã«ã‚‚å–ã‚Šçµ„ã‚“ã§ã¿ã¾ã›ã‚“ã‹ï¼Ÿ`
                });
            }
            
            // æ”¹å–„ææ¡ˆ
            if (weakest.score < 3.0) {
                advice.push({
                    type: 'improvement',
                    title: `ğŸ¯ æˆé•·ã®ãƒãƒ£ãƒ³ã‚¹ï¼š${weakest.name}`,
                    content: getSpecificAdvice(weakest.domain, weakest.score)
                });
            }
            
            // å…¨ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
            const averageScore = scoreEntries.reduce((sum, item) => sum + item.score, 0) / scoreEntries.length;
            
            if (averageScore >= 4.0) {
                advice.push({
                    type: 'overall',
                    title: 'ğŸŒŸ å…¨ä½“çš„ãªè©•ä¾¡',
                    content: 'ã¨ã¦ã‚‚è‰¯ã„ãƒãƒ©ãƒ³ã‚¹ã§å…±ç”Ÿæ´»åŠ›ã‚’ä¿ã£ã¦ã„ã¾ã™ã€‚ã“ã®çŠ¶æ…‹ã‚’ç¶­æŒã—ãªãŒã‚‰ã€ã•ã‚‰ã«æˆé•·ã§ãã‚‹åˆ†é‡ã‚’è¦‹ã¤ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚'
                });
            } else if (averageScore >= 3.0) {
                advice.push({
                    type: 'overall',
                    title: 'ğŸ“ˆ ãƒãƒ©ãƒ³ã‚¹ã®è‰¯ã„æˆé•·',
                    content: 'å„åˆ†é‡ã§ãƒãƒ©ãƒ³ã‚¹ã‚ˆãæˆé•·ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«æ°—ã«ãªã‚‹åˆ†é‡ãŒã‚ã‚Œã°ã€ãã“ã«å°‘ã— focus ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚'
                });
            } else {
                advice.push({
                    type: 'overall',
                    title: 'ğŸŒ± æˆé•·ã®ç¬¬ä¸€æ­©',
                    content: 'ã¾ãšã¯ä¸€ã¤ã®åˆ†é‡ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿå°ã•ãªå¤‰åŒ–ã‹ã‚‰å¤§ããªæˆé•·ã«ã¤ãªãŒã‚Šã¾ã™ã€‚æ”¯æ´è€…ã¨ä¸€ç·’ã«å–ã‚Šçµ„ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚'
                });
            }
            
            // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
            advice.push({
                type: 'action',
                title: 'ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—',
                content: 'ã‚ˆã‚Šè©³ã—ã„åˆ†æã‚„å…·ä½“çš„ãªè¡Œå‹•è¨ˆç”»ã«ã¤ã„ã¦ã¯ã€ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã‚’ãŠè©¦ã—ã„ãŸã ãã‹ã€å°‚é–€ã®æ”¯æ´è€…ã«ã”ç›¸è«‡ãã ã•ã„ã€‚'
            });
            
            // HTMLã«æŒ¿å…¥
            adviceContainer.innerHTML = advice.map(item => `
                <div class="p-4 rounded-lg ${getAdviceColor(item.type)} border-l-4 ${getAdviceBorder(item.type)}">
                    <h4 class="font-bold text-gray-800 mb-2">${item.title}</h4>
                    <p class="text-gray-700">${item.content}</p>
                </div>
            `).join('');
        }

        // é ˜åŸŸåã®å–å¾—
        function getDomainName(domain) {
            const names = {
                health: 'èº«ä½“ãƒ»å¥åº·',
                environment: 'å±…å ´æ‰€ãƒ»ç’°å¢ƒ',
                relationship: 'é–¢ä¿‚ãƒ»ã¤ãªãŒã‚Š',
                learning: 'å­¦ã³ãƒ»å®Ÿè·µ',
                self: 'è‡ªå·±ãƒ»æ„å¿—',
                happiness: 'å¹¸ç¦æ„Ÿ'
            };
            return names[domain] || domain;
        }

        // å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
        function getSpecificAdvice(domain, score) {
            const advice = {
                health: 'å¥åº·ç®¡ç†ã«é–¢ã™ã‚‹æ™‚é–“ã®ç¢ºä¿ã‚„ã€ç›¸è«‡ã§ãã‚‹äººã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚åœ°åŸŸã®ä¿å¥ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã‚‚ãŠå‹§ã‚ã—ã¾ã™ã€‚',
                environment: 'å®‰å¿ƒã§ãã‚‹å ´æ‰€ã‚’è¦‹ã¤ã‘ãŸã‚Šã€ä½ç’°å¢ƒã‚’æ”¹å–„ã—ãŸã‚Šã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚åœ°åŸŸã®æ”¯æ´åˆ¶åº¦ã®åˆ©ç”¨ã‚‚æ¤œè¨ã—ã¦ãã ã•ã„ã€‚',
                relationship: 'ä¿¡é ¼ã§ãã‚‹äººã¨ã®é–¢ä¿‚ã‚’ç¯‰ãã“ã¨ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚åœ°åŸŸã®ã‚µãƒ¼ã‚¯ãƒ«ã‚„æ”¯æ´ã‚°ãƒ«ãƒ¼ãƒ—ã¸ã®å‚åŠ ã‚‚ãŠå‹§ã‚ã—ã¾ã™ã€‚',
                learning: 'èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡ã‹ã‚‰å°‘ã—ãšã¤å­¦ç¿’ã‚’å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å›³æ›¸é¤¨ã‚„å…¬æ°‘é¤¨ã®è¬›åº§ã®åˆ©ç”¨ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚',
                self: 'è‡ªåˆ†ã®æ™‚é–“ã‚’ä½œã‚‹ã“ã¨ã‚„ã€æ„è¦‹ã‚’è¨€ãˆã‚‹ç’°å¢ƒã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚',
                happiness: 'æ—¥å¸¸ã®å°ã•ãªå–œã³ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å¥½ããªã“ã¨ã«æ™‚é–“ã‚’ä½¿ã†ã“ã¨ã‚‚å¤§åˆ‡ã§ã™ã€‚'
            };
            return advice[domain] || 'å°‚é–€å®¶ã«ç›¸è«‡ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚';
        }

        // ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®è‰²åˆ†ã‘
        function getAdviceColor(type) {
            const colors = {
                strength: 'bg-green-50',
                improvement: 'bg-blue-50',
                overall: 'bg-purple-50',
                action: 'bg-orange-50'
            };
            return colors[type] || 'bg-gray-50';
        }

        function getAdviceBorder(type) {
            const borders = {
                strength: 'border-green-500',
                improvement: 'border-blue-500',
                overall: 'border-purple-500',
                action: 'border-orange-500'
            };
            return borders[type] || 'border-gray-500';
        }

        // PDFä¿å­˜
        function downloadPDF() {
            alert('PDFä¿å­˜æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚ç¾åœ¨ã¯ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜ã—ã¦ãã ã•ã„ã€‚');
        }

        // çµæœå…±æœ‰
        function shareResults() {
            if (navigator.share) {
                navigator.share({
                    title: 'ã¯ããã¿ã‚¯ã‚¤ãƒƒã‚¯è¨ºæ–­çµæœ',
                    text: 'å…±ç”Ÿæ´»åŠ›è¨ºæ–­ã‚’å—ã‘ã¾ã—ãŸï¼',
                    url: window.location.href
                });
            } else {
                alert('ã“ã®æ©Ÿèƒ½ã¯ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™ã€‚');
            }
        }

        // ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
        function upgradeToPremium() {
            alert('ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã§ã¯ã€ã‚ˆã‚Šè©³ç´°ãªåˆ†æã¨å°‚é–€å®¶ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒå—ã‘ã‚‰ã‚Œã¾ã™ã€‚é–‹ç™ºä¸­ã®æ©Ÿèƒ½ã§ã™ã€‚');
        }

        // æ”¯æ´è€…ã¨ã®æ¥ç¶š
        function connectToSupporter() {
            alert('æ”¯æ´è€…ãƒãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚ãŠå¾…ã¡ãã ã•ã„ã€‚');
        }

        // è¨ºæ–­å†é–‹å§‹
        function restartAssessment() {
            currentQuestionIndex = 0;
            answers = [];
            clearInterval(timerInterval);
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDg9ypiUo4bTF39qe4dLDjl8PIC9xECu%2FgvA3nNHrvryNpGMB92QfC1KTCB5VC8WWYfLZzyHN5vZvmYc%2BHfy5HvxYhoL8LTFOsqT38LWnMhM1xNw%2Brserj1sgUvcypxfXmXz8lvW3CKNSRc%2Bwp8Bh3N%2BkAffoq8o0Sl363RGk7OQnzcAvzvnIrwBsnX%2FQpMPDDa1HgeQmKTDACoNHRoEniz%2Bkedd%2FRnlDMhz5GGqYoNR5A75vmnUDbljMw96UNlW3LWUHiOj3VBJOdwVW7Y02ylSaXryn4o45a0mIEKcILuHYYzneX3bUWKbi7A8ERQz0%2FMFlVAY7njG4pj1b29WE0jKf6GiWrLx4wGHxdmFwXhVA8lC%2ByQLOu%2FE3eB48FcBiSwwdy33%2BeV3OhPLuQhDRSY%2BpzGglwHVBl9BIAkwGxIS4eQzZNBFp%2FN0PSp%2FCKdoUsXyXcE8eJOOtZbNQgC8vTnYGVdQmsTsiPIQdvtzHOhointUxm4q5TyVERhtnLA68dA%3D%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDg9ypiUo4bTF39qe4dLDjl8PIC9xECu/gvA3nNHrvryNpGMB92QfC1KTCB5VC8WWYfLZzyHN5vZvmYc+Hfy5HvxYhoL8LTFOsqT38LWnMhM1xNw+rserj1sgUvcypxfXmXz8lvW3CKNSRc+wp8Bh3N+kAffoq8o0Sl363RGk7OQnzcAvzvnIrwBsnX/QpMPDDa1HgeQmKTDACoNHRoEniz+kedd/RnlDMhz5GGqYoNR5A75vmnUDbljMw96UNlW3LWUHiOj3VBJOdwVW7Y02ylSaXryn4o45a0mIEKcILuHYYzneX3bUWKbi7A8ERQz0/MFlVAY7njG4pj1b29WE0jKf6GiWrLx4wGHxdmFwXhVA8lC+yQLOu/E3eB48FcBiSwwdy33+eV3OhPLuQhDRSY+pzGglwHVBl9BIAkwGxIS4eQzZNBFp/N0PSp/CKdoUsXyXcE8eJOOtZbNQgC8vTnYGVdQmsTsiPIQdvtzHOhointUxm4q5TyVERhtnLA68dA==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    